
<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>A.Stoisavljevic - Blogs - SpringBoot, Jersey & Eureka</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="../../../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../css/font-awesome.min.css">

    <link rel="stylesheet" href="../../../../css/main.css">

    <!-- HighlightJS -->
    <link rel="stylesheet" href="../../../../css/default.css">
    <script src="../../../../js/highlight.js"></script>

</head>
<body>
<header class="hero-image" role="banner" style="background-image: url(../../../../img/laptop-nature.jpeg);">
    &nbsp;
</header>

<main class="container">
    <div class="row">
        <p class="col-xs-12 single-content">
            <p class="meta">
                <a class="" href="#">Aleksandar Stoisavljevic</a> in
                <a class="" href="#">Development</a>
                <i class="link-spacer"></i> <i class="fa fa-bookmark"></i> 20 minute read
            </p>

            <h1>A story about how to setup SpringBoot, Jersey & Eureka</h1>

            <p class="subtitle"><i>Jersey 2.x and SpringCloud doesn't get along so I have to make my fingers dirty ...</i></p>

            <p>
                In the last couple of months I was evaluating/exploring micro-services. Preparing for one of the
                conferences I've decided to make a demo application. While micro-services were not main theme for
                conference presentation, I wanted to try to deal with micro-service architecture-based application.
                <br/>
                Idea that cross my mind was to investigate and try couple of Spring Cloud components.
                <br/>
                Main parts of final application were:
                <ul>
                    <li>Spring Boot 1.3.1.RELEASE</li>
                    <li>Jersey JAX-RS 2.x</li>
                    <li>Spring Cloud Eureka 1.0.4.RELEASE</li>
                </ul>
            </p>
            <p>
                High Level Architecture (HLA) diagram is about to present: two well designed and minimalistic web services,
                one that can represent Catalog (Manufacturer and PhoneModel) and the other that will deal with Inventory
                (how many stock items of one phone model shop has at it's disposal).
                Besides that, these two simple micro-services should become part of one bigger system/application, therefore
                I wanted to play a bit with other key aspects of micro-services architecture like: service-discovery,
                API gateway, etc.
                Due to that fact, I've started to look into Spring Cloud components like: Eureka (service-discovery),
                Zuul (API Gateway), ...
            </p>
            <p class="pullquote">Spring Cloud Eureka Server (service discovery)</p>
            <p>
                Investigation about Eureka was pretty straight forward.
                <br/>
                Good starting point is folowing URL:
                <br/>
                <a href="http://projects.spring.io/spring-cloud/docs/1.0.3/spring-cloud.html#spring-cloud-eureka-server">
                    http://projects.spring.io/spring-cloud/docs/1.0.3/spring-cloud.html#spring-cloud-eureka-server
                </a>
            </p>
            <p>
                For this simple application, Eureka Server will be run in "Standalone Mode". Configuration in this case
                is very simple, there is no need to configure peers.
                <pre><code>
                server:
                    port: 8761
                eureka:
                     instance:
                          hostname: localhost

                     client:
                          register-with-eureka: false
                          fetch-registry: false
                          service-url:
                               defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/
                </code></pre>
            </p>

            <p>
                The Eureka Server is:
                <ul>
                    <li>managing a registry of Service Instances,</li>
                    <li>provide means to register, de-register and query Instances with the registry,</li>
                    <li>registry propagation to other Eureka Instances (Servers or Clients).</li>
                </ul>
            </p>

            <p>
                I've prepared SpringBoot application based on Eureka Server.
                <br/>
                Project is on Github, on the following URL:
                <br/>
                <a href="https://github.com/staleks/eureka-server">https://github.com/staleks/eureka-server</a>
                <br/>
                <br/>
                Basic info, how to build and start application, you can find in README.md of that project.
            </p>

            <p class="pullquote">Spring Boot and Jersey</p>

            <p>
                Now it was the time to start building basic, already mentioned, services like Catalog service and
                Inventory service.
                <br/>
                So let's start with Catalog Service. Again this will be SpringBoot based application based on REST service.
                Catalog will be dealing with two basic entities like: Manufacturer and Phone (phone-model).
                <br/>
                Spring-Web and Spring-MVC have nice features providing support for controller/endpoints,
                using Jackson data-bind, Java objects can be transformed to JSON objects very easily, I've decided to
                try reference REST implementation, Jersey.
            </p>

            <p>
                Ingredients for REST micro-service are:
                <ul>
                    <li>Spring Boot 1.3.1.RELEASE</li>
                    <li>H2 In-Memory DB</li>
                    <li>Spring Data JPA</li>
                    <li>Liquibase - versin source control for DB</li>
                    <li>JTransfo - Bean-to-bean mapper</li>
                    <li>Jersey 2.x</li>
                </ul>
            </p>

            <p>
                I've prepared SpringBoot application, REST micro-service based on Jersey 2.x.
                Started using <a href="http://start.spring.io">http://start.spring.io</a>.
                Picked basic few stuff like: DevTools, Jersey, JPA, etc. The project can also be found on Github:
                <br/>
                <a href="https://github.com/staleks/spring-boot-jersey2">https://github.com/staleks/spring-boot-jersey2</a>
                <br/>
                <br/>
                Basic info, how to build and start application, you can find in README.md of that project.
            </p>

            <p>
                Application works fine, data is populated in H2 In-Memory data base
                <img src="images/h2-console/h2-console-003.png">
                and each of the exposed endpoint is available, showing data that were stored in DB.
                <br/>
                <img src="images/jersey/jersey-001.png">
                <br/>
                <img src="images/jersey/jersey-002.png">
                <br/>
                <img src="images/jersey/jersey-003.png">
                <br/>
                <img src="images/jersey/jersey-004.png">
            </p>

            <hr>

            <p>
                Problemi u raju. Ovde pokazati kako stvar ne funkcionise zbog toga sto
                je Spring Cloud Eureka zasnovan na Jersey 1.x, a Spring starter Jersey je
                baziran na Jersey 2.x
            </p>

            <p class="pullquote">How I solve it?</p>


            <p>
                Do not use Spring Jersey starter.
                <br/>
                Add dependencies of Jersey 1.19 (latest from 1.x)
                <br/>
                Napravi dva nova Github repositorija sa finalnim resenjem
                <br/>
                Screenshots:
                <ul>
                    <li>Eureka Server - apps</li>
                    <li>Spring Boot microservice & Jersey 1.x</li>
                </ul>
            </p>

        </div><!-- main-content/col -->
    </div> <!--/row -->

</main> <!-- /container -->

<footer class="single">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-2">
                <img src="../../../../img/as-profile.jpg" class="user-icon " alt="user-image">
            </div>
            <div class="col-xs-12 col-sm-6">
                <div class="category-list">
                    <p>Published <span>20th December 2015</span></p>
                    <p><a href="#">Aleksandar Stoisavljevic</a> in <a href="#">Development</a></p>

                    <div class="other-catergories">
                        <h3>Also found in</h3>

                        <ul>
                            <li><a href="#">Stories</a>,</li>
                            <li><a href="#">Life</a>,</li>
                            <li><a href="#">Adventures</a></li>
                        </ul>
                    </div>

                </div>
            </div><!-- end col -->
            <div class="col-xs-12 col-sm-4">
                <div class="social">
                    <p>Share this article</p>
                    <div class="social-links">
                        <a class="social-icon" href="#" data-platform="twitter" data-message="Message about this post" data-url="#"><i class="fa fa-twitter"></i></a>

                        <!--
                        <a class="social-icon" href="#" data-platform="facebook" data-message="Message about this post" data-url="#"><i class="fa fa-facebook-official"></i></a>
                        -->

                        <a class="social-icon" data-platform="mail"  href="mailto:staleks@gmail.com"><i class="fa fa-envelope"></i></a>
                    </div>
                </div>
            </div>
        </div><!-- end row -->
    </div>

    <!--
    <div class="row read-another-section">
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-iceland.jpg">
            <h3 class="read-another">Land of Fire &amp; Ice</h3>
        </div></a>
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-spain.jpg">
            <h3 class="read-another">The Coast of Your Mind</h3>
        </div></a>
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-peak.jpg">
            <h3 class="read-another">Get Out of Your Comfort Zone</h3>
        </div></a>
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-woods.jpg">
            <h3 class="read-another">Not All Who Wander Are Lost</h3>
        </div></a>
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-sunset.jpg">
            <h3 class="read-another">Open Your Mind</h3>
        </div></a>
        <a href="post.html"><div class="col-sm-6 col-md-2 no-gutter read-another-container">
            <div class="overlay"></div>
            <img src="img/square-mountain.jpg">
            <h3 class="read-another">Ten Reasons to Hike</h3>
        </div></a>
    </div>
    -->
</footer>

<!-- End of your code -->
<script src="../../../../js/jquery-2.1.1.min.js"></script>
<script src="../../../../js/bootstrap.min.js"></script>

<script src="../../../../js/main.js"></script>

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-5333275-2','auto');
    ga('require', 'displayfeatures');
    ga('send','pageview');
</script>

<!-- Initialize HighlightJS -->
<script>
    $(document).ready(function() {
        $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
</script>
</body>
</html>
